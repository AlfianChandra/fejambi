import{d as gt,e as p,l as O,C as ht,j as kt,r as Ee,o,c as i,g as l,a as v,h as f,u as r,q as g,w as T,F as b,z as L,t as y,m as x,f as le,n as k,y as je,D as Ke,p as xt}from"./index-jIkIrgch.js";import{_ as me}from"./InputView.vue_vue_type_style_index_0_lang-C-9rVguE.js";import{_ as wt}from"./MainWrapperView.vue_vue_type_style_index_0_lang-hSado6i1.js";import{u as _t}from"./theme-DGGhXdM6.js";import{_ as be}from"./SelectView.vue_vue_type_style_index_0_lang-iw6pU_b6.js";import{_ as N}from"./ButtonView.vue_vue_type_style_index_0_computed_true_lang-DVUK09Rk.js";import{_ as Me,a as Dt,m as Ct,u as $t}from"./HistoryECharts.vue_vue_type_script_setup_true_lang-CZkx9Fm0.js";import{a as Lt}from"./axios-BimPEqV4.js";import{_ as Ue}from"./CheckboxView.vue_vue_type_style_index_0_computed_true_lang-T1DAJqT4.js";import{i as Tt}from"./index-CehbAW_K.js";import{t as St}from"./trunk-CuaAdnZJ.js";import{h as Pt}from"./moment-C5S46NFB.js";const Vt={key:0,class:"q-prd-win"},Mt=["value"],At={key:0,style:{display:"flex","flex-flow":"row wrap",gap:"1rem"}},Rt={key:1,style:{color:"red","font-weight":"bold"}},Ft={key:2,style:{padding:"2rem",position:"relative",width:"100%"}},Ot={style:{"margin-top":"1rem",width:"100%",position:"relative",display:"flex","flex-flow":"column","align-items":"center"}},It={style:{color:"red","text-transform":"capitalize"}},Nt={key:0},Et={class:"col-md-12"},jt={style:{display:"flex","flex-flow":"row nowrap","justify-content":"flex-end"}},Kt={class:"col-md-3"},Ut=["value"],qt={style:{display:"flex","flex-flow":"row nowrap","align-items":"center",gap:"1rem"}},zt={style:{display:"flex","flex-flow":"row nowrap",gap:"1rem","align-items":"center"}},Bt={class:"col-md-12"},Yt={class:"table-responsive"},Gt={style:{display:"flex","flex-flow":"row nowrap","justify-content":"flex-end",gap:"1rem"}},Ht={style:{display:"flex","flex-flow":"row wrap","justify-content":"flex-end","align-items":"center",gap:"0.5rem","margin-bottom":"1rem",border:"1px solid #ccc",width:"fit-content",padding:"10px","border-radius":"100px"}},Wt={style:{display:"flex","flex-flow":"row nowrap","align-items":"center"}},Qt={style:{display:"flex","flex-flow":"row nowrap","align-items":"center"}},Zt={class:"tbl"},Jt={class:"theads"},Xt={style:{display:"flex","flex-flow":"column",width:"150px"}},el={style:{"font-size":"14px","font-weight":"bold"}},tl={key:1,style:{color:"#ccc"}},ll={style:{display:"flex","flex-flow":"row nowrap"}},al={style:{width:"100%",display:"flex","flex-flow":"column"}},ol=["src"],nl={class:"col-md-12",style:{"margin-bottom":"1rem","margin-top":"2rem"}},sl={class:"table-responsive"},il={class:"tbl2"},ul=["onClick"],rl={class:"tbl2"},dl={key:2,class:"leak-window"},cl={class:"table-responsive"},pl={key:0},vl=["href"],yl={style:{color:"#555"}},fl={style:{"margin-top":"1rem"}},ml={key:1},bl={style:{"margin-top":"1rem"}},gl={key:3,class:"playback-controller"},hl={style:{display:"flex","flex-flow":"row nowrap",gap:".5rem"}},kl={style:{cursor:"pointer",padding:"10px",border:"1px solid #ccc","margin-bottom":"1rem","border-radius":"10px"}},xl={style:{cursor:"pointer",padding:"10px",border:"1px solid #ccc","margin-bottom":"1rem","border-radius":"10px"}},wl={style:{"border-radius":"10px",display:"flex","flex-flow":"row nowrap","justify-content":"space-between","padding-left":"10px","padding-right":"10px",border:"1px solid #ccc",padding:"20px","margin-bottom":"1rem"}},_l={style:{border:"1px solid #ccc",padding:"10px","padding-left":"40px","padding-right":"40px","border-radius":"100px"}},Dl={style:{display:"flex","flex-flow":"row nowrap",width:"100%","align-items":"center"}},Cl={style:{display:"flex","flex-flow":"no wrap",padding:"10px",gap:"0.5rem"}},$l={style:{width:"100%",padding:"10px",position:"relative"}},Ll=["max","value"],Tl={class:"slider-highlight"},Sl={key:5,class:"pb-prompt"},Pl={class:"pbp-inner"},Vl={style:{"text-align":"center"}},Bl=gt({__name:"HistorySplittedFol",setup(Ml){const qe=St(),ge=p(),he=p(),ke=p(),D=p(qe.getAllTrunk()),C=p("trunk1"),E=p([]),ae=$t(),P=p([]),_=p(0),z=p(0);p("normal");const oe=p(500);ke.value=Object.keys(D.value);const d=_t(),ne=p(60),V=p(),B=p([]),xe=p(!1);d.asideToggle(!1);const ze=()=>{const n=new Date,e=n.getFullYear(),s=String(n.getMonth()+1).padStart(2,"0"),a=String(n.getDate()).padStart(2,"0"),t=`${e}-${s}-${a}`;V.value=t};O(()=>[V.value,ne.value,C.value],async()=>{await se()});const Ae=async n=>new Promise(async(e,s)=>{try{const a=D.value[C.value];let t=[];for(let h=0;h<a.spot.length;h++)t.push(a.spot[h].id);const u={datefilter:n,timeFilter:ne.value,idFilter:t},c=await Lt.post(xt.baseEnd+"api/History/getsplittedhistdata",u);e(c.data)}catch(a){s(a)}}),Re=p({});function Be(n){const e={};return n.forEach(s=>{s.data.forEach(a=>{const{idSpot:t,avgPsiValues:u}=a;e[t]?(u>e[t].maxValue&&(e[t].maxValue=u),u<e[t].minValue&&(e[t].minValue=u)):e[t]={maxValue:u,minValue:u}})}),Re.value=e,Re.value}const Ye=ht(()=>Be(B.value));function Ge(n,e){const s=Ye.value;if(!s[e])return"";const a=n.data.find(t=>t.idSpot===e);if(a){if(a.avgPsiValues===s[e].maxValue)return"highest-value";if(a.avgPsiValues===s[e].minValue)return"lowest-value"}return""}const m=p({});let we=null;const A=p(null),_e=p({});O(()=>m.value,()=>{if(console.log("Selected Data (Before Sort):",m.value),we=Object.keys(m.value),Y(),A.value!=null){_e.value=[];const n=A.value,e=m.value[n].data;we.filter(a=>a!==n).forEach(a=>{const t=m.value[a].data,u=[];D.value[C.value].spot.forEach((c,h)=>{const M=c.id,q=e.find(te=>te.idSpot===M),Ne=t.find(te=>te.idSpot===M);if(q&&Ne){const te=q.avgPsiValues-Ne.avgPsiValues;u[h]=te}else u[h]=0}),_e.value.push({dropKey:a,deltas:u})})}});const Fe=(n,e,s)=>{const a=e.timeRange,t=e.type,u=e.rangeData,c=e.dateFilter;n?(m.value[a+"."+t+"."+c]={timerange:a,type:t,checkbox:s,data:u,date:c},t==="normal"&&(A.value=a+"."+t+"."+c),m.value=Oe(m.value),Y()):(delete m.value[a+"."+t+"."+c],t==="normal"&&A.value===a+"."+t+"."+c&&(A.value=null),m.value=Oe(m.value),Je(!0))},Oe=n=>{const e=Object.entries(n);return e.sort((s,a)=>s[1].type==="normal"&&a[1].type!=="normal"?-1:s[1].type!=="normal"&&a[1].type==="normal"?1:0),Object.fromEntries(e)},He=n=>n.type==="normal"?A.value!==null&&A.value!==n.timeRange+"."+n.type+"."+n.date:!1,Y=()=>{Object.keys(m.value).length>1?xe.value=!0:xe.value=!1},We=async()=>{B.value=[],De(),Y(),await se().then(()=>{}).catch(n=>{})},se=async()=>{De(),B.value=[];try{let e=[...await Ae(V.value)];if(E.value.length>0)for(let s=0;s<E.value.length;s++){const a=E.value[s];if(a!==null){if(a.value!==V.value){const t=await Ae(a.value);e=e.concat(t)}}else console.log("Null")}B.value=e,P.value=e}catch(n){console.log(n)}},Qe=()=>{De(),Y(),ue.value=[]},De=()=>{Object.keys(m.value).forEach(n=>{const e=m.value[n].checkbox;e.checked=!1}),A.value=null,m.value={},Y()},ie=p(),Ze=async(n,e)=>{const s=n.map((c,h)=>{const M=c.length>1?c.map(q=>Number(q)||0):[0];return h==0?{name:"Normal",type:"line",data:M,smooth:!0}:{name:"Drop "+h,type:"line",data:M,smooth:!0}});let a=[];for(let c=0;c<D.value[C.value].spot.length;c++)a.push(D.value[C.value].spot[c].name);const t=await Promise.all(s);t.sort((c,h)=>c.name==="Normal"?-1:h.name==="Normal"?1:0);const u={toolbox:{show:!0,orient:"vertical",feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},magicType:{type:["line","bar"]},restore:{},saveAsImage:{}}},tooltip:{trigger:"item",axisPointer:{type:"cross"}},grid:{left:"10%",right:"10%",bottom:"10%",containLabel:!0},legend:{show:!0},xAxis:{type:"category",data:a,axisLabel:{show:!0,rotate:45},boundaryGap:!1,axisTick:{alignWithLabel:!0}},yAxis:{name:"Pressure (PSI)",nameTextStyle:{verticalAlign:"middle"},axisTick:{show:!0,inside:!0},type:"value",axisLine:{show:!0}},series:t};if(!e)ie.value.setOption(u);else{let c={toolbox:{show:!0,orient:"vertical",feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},magicType:{type:["line","bar"]},restore:{},saveAsImage:{}}},tooltip:{trigger:"item",axisPointer:{type:"cross"}},grid:{left:"10%",right:"10%",bottom:"10%",containLabel:!0},legend:{show:!0},xAxis:{type:"category",data:a,axisLabel:{show:!0,rotate:45},boundaryGap:!1,axisTick:{alignWithLabel:!0}},yAxis:{name:"Pressure (PSI)",nameTextStyle:{verticalAlign:"middle"},axisTick:{show:!0,inside:!0},type:"value",axisLine:{show:!0}},series:t};ie.value.clear(),ie.value.setOption(c)}},Je=(n=!1)=>{if(ie.value){let e=[];Object.keys(m.value).forEach(s=>{const a=m.value[s].data;let t=[];for(let u=0;u<a.length;u++)t.push(parseFloat(a[u].avgPsiValues).toFixed(2));e.push(t)}),Ze(e,n)}};kt(()=>{ze()});const Ie=(n,e)=>{const a=m.value[n].data;for(let t=0;t<a.length;t++)if(a[t].idSpot==e)return a[t].avgPsiValues.toFixed(2)},j=n=>n.spot,Xe=(n,e)=>{const s=m.value[e],a=s.timerange,t=s.type,u=s.date;t==="normal"&&A.value===a+"."+t+"."+u&&(A.value=null),n.checked=!1;const c={...m.value};delete c[e],m.value=c},G=p(0),et=()=>{G.value++,E.value.push(null)},tt=()=>{G.value>0&&(G.value--,E.value.pop()),se()},lt=(n,e)=>{E.value[e]=n,se()};p(0);const H=p(!1),ue=p([]),K=p([]),U=p(!1),re=p(),Ce=p(),at=async()=>{ue.value=[];const n=ae.predict(m.value,D.value[C.value]);K.value=n,H.value=!0;for(let e=0;e<K.value.length;e++)K.value[e].suspectLocation.leak&&ue.value.push(K.value[e])},ot=(n,e)=>{re.value=n,U.value=!1,U.value=!0,Ce.value=e};O(()=>H.value,()=>{H.value||(U.value=!1,K.value=null,re.value=null,Ce.value=null)}),O(()=>ge.value,()=>{nt(),W(_.value)});const nt=()=>{he.value=Tt(ge.value);const n={grid:{top:"10%",left:"10%",right:"10%",bottom:"15%"},legend:{show:!0,type:"scroll",orient:"horizontal"},xAxis:{type:"category",data:[],boundaryGap:!1,axisLabel:{rotate:45,labelStyle:{fontSize:10}},splitLine:{show:!0,lineStyle:{type:"dashed"}},axisTick:{alignWithLabel:!0}},yAxis:{type:"value",name:"Pressure (PSI)",nameGap:10,max:400,axisTick:{show:!0,inside:!0}},series:[]};he.value.setOption(n)};let $e=[];const de={},Le=p([]),R=p({}),st=p(),W=n=>{$e=[];for(let a of D.value[C.value].spot)de[a.name]=[];P.value.slice(0,n+1).forEach((a,t)=>{const u=`${a.dateFilter} (${a.timeRange})`;$e.push(u),st.value=u,a.data.forEach(c=>{const h=D.value[C.value].spot.find(q=>q.id===c.idSpot).name,M=c.avgPsiValues??0;de[h][t]=Number(M.toFixed(2))})});const s=Object.keys(de).map(a=>({name:a,type:"line",data:de[a],symbol:"none",smooth:!0,tooltip:{trigger:"axis",formatter:function(t){return t[0].value}},endLabel:{show:!0,formatter:function(t){return t.value},color:"#000",backgroundColor:"inherit",padding:5,borderRadius:5}}));he.value.setOption({xAxis:{data:$e},series:s})},Q=p(!1),w=p(!1),it=n=>{w.value=!1,Le.value=[],_.value=parseInt(n.target.value,10),W(_.value),z.value=_.value/P.value.length*100};let F=null;O(()=>[w.value,oe.value],()=>{w.value?(F!=null&&clearInterval(F),F=setInterval(()=>{_.value<P.value.length?(_.value++,P.value[_.value]!=null&&(W(_.value),z.value=_.value/P.value.length*100)):(w.value=!1,clearInterval(F))},oe.value)):F&&(clearInterval(F),F=null)});const ut=()=>{Q.value=!1,w.value=!1,_.value=0,Le.value=[],clearInterval(F),W(_.value),z.value=_.value/P.value.length*100},ce=()=>{w.value=!1,_.value=0,Le.value=[],clearInterval(F),W(_.value),z.value=_.value/P.value.length*100},Te=p(!1);O(()=>R.value,()=>{w.value=!1,Te.value=!0},{deep:!0});const rt=()=>{Te.value=!1,w.value=!0},pe=p(0),dt=()=>D.value[C.value].trunkLength,S=p("trunk1"),ve=p(!1),I=p({}),$=p(null),Z=p(!0);let J=null,X=null,ee=null,ye=null;O(()=>S.value,()=>{J=null,X=null,ee=null,ye=null,$.value=null,I.value=null,I.value={},S.value=="trunk1"?Z.value=!0:S.value=="trunk2"?Z.value=!1:(S.value=="trunk3"||S.value=="trunk4")&&(Z.value=!0)});const ct=n=>{const e=n.id,s=n.value;I.value[e]=s,Object.keys(I.value).forEach(a=>{a=="0"?J=I.value[a]:a=="1"?X=I.value[a]:a=="2"?ee=I.value[a]:a=="3"&&(ye=I.value[a])}),S.value=="trunk1"?pt(J,X,ee,ye):S.value=="trunk2"?console.log("!"):S.value=="trunk3"?vt(J,X,ee):S.value=="trunk4"&&yt(J,X,ee,ye)},pt=(n,e,s,a)=>{const t=ae.predictLocation(n,e,s,a);$.value=t},vt=(n,e,s)=>{const a=ae.predictSglLocation(n,e,s);$.value=a},yt=(n,e,s,a)=>{const t=ae.predictBtgLocation(n,e,s,a);$.value=t},Se=p(""),Pe=p(""),Ve=p(!0),fe=p(!1);O(()=>V.value,()=>{const n=Pt(V.value),e=n.add(1,"days").format("YYYY-MM-DD"),s=n.subtract(2,"days").format("YYYY-MM-DD");Se.value=e,Pe.value=s});const ft=()=>{V.value=Se.value,ce(),fe.value&&(w.value=!0)},mt=()=>{V.value=Pe.value,ce(),fe.value&&(w.value=!0)};O(()=>w.value,()=>{!w.value&&_.value==P.value.length&&Ve.value&&(ce(),w.value=!0)});const bt=n=>{pe.value=n};return(n,e)=>{const s=Ee("font-awesome-icon"),a=Ee("center");return o(),i(b,null,[ve.value?(o(),i("div",Vt,[l("div",{class:k(["q-prd-body",[`${r(d).mTheme}`]])},[l("button",{type:"button",class:"q-prd-close",onClick:e[0]||(e[0]=t=>ve.value=!1)},[v(s,{icon:"times"})]),l("h3",null,[l("b",{style:f({color:`${r(d).accentColor}`})},[v(s,{icon:"calculator"}),e[14]||(e[14]=g(" Quick Leak Prediction"))],4)]),v(be,{"in-label":"Select Line","model-value":S.value,"onUpdate:modelValue":e[1]||(e[1]=t=>S.value=t)},{default:T(()=>[(o(!0),i(b,null,L(ke.value,(t,u)=>(o(),i("option",{key:u,value:t},y(D.value[t].name),9,Mt))),128))]),_:1},8,["model-value"]),e[18]||(e[18]=l("p",null,[l("b",null,"Deltas:")],-1)),Z.value?(o(),i("div",At,[(o(!0),i(b,null,L(j(D.value[S.value]),(t,u)=>(o(),le(me,{key:u,onOnValueChange:ct,"in-id":String(u),"in-label":t.name,"in-type":"number","model-value":t.value,"onUpdate:modelValue":c=>t.value=c},null,8,["in-id","in-label","model-value","onUpdate:modelValue"]))),128))])):(o(),i("p",Rt,"Quick Prediction is currently not available for this line")),$.value?(o(),i("div",Ft,[e[17]||(e[17]=l("h4",{style:{"text-align":"center"}},[l("b",null,"Prediction result")],-1)),l("div",Ot,[$.value.suspectLocation.leak?(o(),i(b,{key:0},[l("h2",null,[l("b",It,y($.value.suspectLocation.message),1)]),l("h4",null,[e[15]||(e[15]=g("Leak Point: ")),l("b",null,y($.value.suspectLocation.leakData.leak_point)+" KM",1)]),l("h4",null,[e[16]||(e[16]=g("PU: ")),l("b",null,"KM "+y($.value.suspectLocation.leakData.pu_location),1)]),$.value.suspectLocation.useMap?x("",!0):(o(),i("p",Nt,"Map view not available")),$.value.suspectLocation.useMap?(o(),le(Me,{key:1,latitude:$.value.suspectLocation.leakData.coordinate.latitude,longitude:$.value.suspectLocation.leakData.coordinate.longitude,"translate-address":!1,popup:`Leak: <b>${$.value.suspectLocation.leakData.leak_point} KM</b> <br> PU: KM <b>${$.value.suspectLocation.leakData.pu_location}</b>`},null,8,["latitude","longitude","popup"])):x("",!0)],64)):(o(),i(b,{key:1},[g(y($.value)+" ",1),l("ul",null,[(o(!0),i(b,null,L($.value.suspectLocation.probabilities,(t,u)=>(o(),i("li",{key:u},y(t),1))),128))])],64))])])):x("",!0)],2)])):x("",!0),v(wt,{"context-title":"FOL | Splitted History Data"},{default:T(()=>[l("div",Et,[l("div",jt,[v(N,{onClick:e[2]||(e[2]=t=>ve.value=!ve.value),"bt-disabled":!1},{default:T(()=>[v(s,{icon:"calculator"}),e[19]||(e[19]=g(" Quick Leak Predict"))]),_:1})])]),l("div",Kt,[v(be,{"in-label":"Select Line","model-value":C.value,"onUpdate:modelValue":e[3]||(e[3]=t=>C.value=t)},{default:T(()=>[(o(!0),i(b,null,L(ke.value,(t,u)=>(o(),i("option",{key:u,value:t},y(D.value[t].name),9,Ut))),128))]),_:1},8,["model-value"]),v(be,{"in-label":"Time Range","model-value":ne.value,"onUpdate:modelValue":e[4]||(e[4]=t=>ne.value=t)},{default:T(()=>e[20]||(e[20]=[l("option",{value:"1"},"1 Menit",-1),l("option",{value:"2"},"2 Menit",-1),l("option",{value:"3"},"3 Menit",-1),l("option",{value:"4"},"4 Menit",-1),l("option",{value:"5"},"5 Menit",-1),l("option",{value:"15"},"15 Menit",-1),l("option",{value:"30"},"30 Menit",-1),l("option",{value:"60"},"60 Menit",-1)])),_:1},8,["model-value"]),l("div",qt,[v(me,{"in-type":"date","in-label":"Date Filter","model-value":V.value,"onUpdate:modelValue":e[5]||(e[5]=t=>V.value=t),style:{width:"100%"}},null,8,["model-value"])]),l("div",zt,[v(N,{onClick:tt,"bt-size":"small","bt-type":"button","bt-disabled":!1},{default:T(()=>[v(s,{icon:"minus"})]),_:1}),l("span",{class:k([`${r(d).textTheme}`])},y(G.value),3),v(N,{onClick:et,"bt-size":"small","bt-type":"button","bt-disabled":!1},{default:T(()=>[v(s,{icon:"plus"})]),_:1})]),(o(!0),i(b,null,L(G.value,(t,u)=>(o(),i("div",{key:u,style:{display:"flex","flex-flow":"row nowrap","align-items":"center",gap:"1rem"}},[v(me,{"in-type":"date","in-label":`Date Filter ${t}`,onOnValueChange:c=>lt(c,u),style:{width:"100%"}},null,8,["in-label","onOnValueChange"])]))),128))]),l("div",Bt,[l("div",Yt,[l("div",Gt,[l("div",Ht,[l("div",Wt,[e[21]||(e[21]=l("div",{style:{"background-color":"green",width:"20px",height:"20px","border-radius":"100px"}},null,-1)),l("span",{class:k([`${r(d).textTheme}`]),style:{"margin-left":"0.2rem","font-size":"12px","font-weight":"bold"}},"Nilai Tertinggi",2)]),l("div",Qt,[e[22]||(e[22]=l("div",{style:{"background-color":"red",width:"20px",height:"20px","border-radius":"100px"}},null,-1)),l("span",{class:k([`${r(d).textTheme}`]),style:{"margin-left":"0.2rem","font-size":"12px","font-weight":"bold"}},"Nilai Terendah",2)])]),v(N,{onClick:We,"bt-disabled":!1,"bt-type":"button","bt-size":"small",style:{height:"42px",width:"42px","border-radius":"100px",display:"flex","flex-flow":"row nowrap","align-items":"center"}},{default:T(()=>[v(s,{icon:"refresh"})]),_:1})]),l("table",Zt,[l("thead",Jt,[l("tr",{style:{padding:"20px"},class:k([`${r(d).textTheme}`])},[l("th",{style:f({border:`1px solid ${r(d).accentColor}`})},[v(s,{icon:"check-double"})],4),l("th",{style:f({border:`1px solid ${r(d).accentColor}`})},"Interval",4),(o(!0),i(b,null,L(j(D.value[C.value]),(t,u)=>(o(),i("th",{style:f({border:`1px solid ${r(d).accentColor}`}),key:u},y(t.name),5))),128))],2)]),l("tbody",null,[(o(!0),i(b,null,L(B.value,(t,u)=>(o(),i("tr",{key:u},[l("td",{style:f({border:`1px solid ${r(d).accentColor}`,width:"150px"}),class:k([`${r(d).textTheme}`])},[l("div",Xt,[v(Ue,{cb_disabled:He({timeRange:t.timeRange,type:"normal"}),cb_data:{timeRange:t.timeRange,type:"normal",rangeData:t.data,dateFilter:t.dateFilter},onOnCheckBoxChange:Fe,cb_label:"Normal"},null,8,["cb_disabled","cb_data"]),v(Ue,{cb_disabled:!1,cb_checked:!1,cb_data:{timeRange:t.timeRange,type:"drop",rangeData:t.data,dateFilter:t.dateFilter},onOnCheckBoxChange:Fe,cb_label:"Drop"},null,8,["cb_data"])])],6),l("td",{style:f({border:`1px solid ${r(d).accentColor}`}),class:k([`${r(d).textTheme}`])},[l("span",el,y(t.dateFilter),1),e[23]||(e[23]=l("br",null,null,-1)),g(y(t.timeRange),1)],6),(o(!0),i(b,null,L(j(D.value[C.value]),(c,h)=>(o(),i("td",{style:f({border:`1px solid ${r(d).accentColor}`,position:"relative"}),key:h,class:k([`${Ge(t,c.id)}`,`${r(d).textTheme}`])},[t.data.find(M=>M.idSpot===c.id)?(o(),i(b,{key:0},[g(y(t.data.find(M=>M.idSpot===c.id).avgPsiValues.toFixed(2)),1)],64)):(o(),i("span",tl,"N/A"))],6))),128))]))),128))])])])])]),_:1}),xe.value?(o(),i("div",{key:1,class:k(["chart-container",[`${r(d).mTheme}`]])},[l("button",{onClick:Qe,class:"chc-dismiss",style:f({color:`${r(d).accentColor}`})},[v(s,{icon:"close"})],4),l("div",ll,[l("div",al,[v(a,null,{default:T(()=>[v(me,{"in-label":"Drop Tolerance Value","in-type":"number","model-value":pe.value,"onUpdate:modelValue":e[6]||(e[6]=t=>pe.value=t),style:{width:"200px"}},null,8,["model-value"])]),_:1}),Object.keys(m.value).length?(o(),le(Dt,{key:0,onOnToleranceChanged:bt,"chart-data":m.value,"selected-spot":C.value,"trunk-length":dt(),"tolerance-value":pe.value,"prediction-result":ue.value},null,8,["chart-data","selected-spot","trunk-length","tolerance-value","prediction-result"])):x("",!0)])]),l("img",{src:r(Ct),alt:"map",style:{width:"100%",height:"375px","border-radius":"10px","object-fit":"contain"}},null,8,ol),l("div",nl,[v(a,null,{default:T(()=>[Object.keys(m.value).length>1?(o(),le(N,{key:0,"bt-type":"button","bt-disabled":!1,onClick:at},{default:T(()=>[v(s,{icon:"water"}),e[24]||(e[24]=g(" Estimate Leak Location "))]),_:1})):x("",!0)]),_:1})]),l("div",sl,[l("h5",{style:{"margin-top":"1rem"},class:k([`${r(d).textTheme}`])},[l("b",null,[v(s,{icon:"oil-well"}),e[25]||(e[25]=g(" Selected Pressures"))])],2),l("table",il,[l("thead",null,[l("tr",{style:{padding:"5px"},class:k([`${r(d).textTheme}`])},[l("th",{style:f({border:`1px solid ${r(d).accentColor}`})},"ACTION",4),l("th",{style:f({border:`1px solid ${r(d).accentColor}`})},"PINNED SERIES",4),(o(!0),i(b,null,L(j(D.value[C.value]),(t,u)=>(o(),i("th",{style:f({border:`1px solid ${r(d).accentColor}`}),key:u},y(t.name),5))),128))],2)]),l("tbody",null,[(o(!0),i(b,null,L(r(we),(t,u)=>(o(),i("tr",{key:u},[l("td",{style:f({border:`1px solid ${r(d).accentColor}`,position:"relative",textTransform:"uppercase",fontWeight:"bold"})},[l("button",{onClick:c=>Xe(m.value[t].checkbox,t),class:"remove-series",type:"button"},[v(s,{icon:"close"})],8,ul)],4),l("td",{class:k([`${r(d).textTheme}`]),style:f({border:`1px solid ${r(d).accentColor}`,position:"relative",textTransform:"uppercase",fontWeight:"bold"})},[g(y(m.value[t].date),1),e[26]||(e[26]=l("br",null,null,-1)),g(" "+y(m.value[t].timerange),1),e[27]||(e[27]=l("br",null,null,-1)),g(" "+y(m.value[t].type),1)],6),(o(!0),i(b,null,L(j(D.value[C.value]),(c,h)=>(o(),i("td",{style:f({border:`1px solid ${r(d).accentColor}`}),class:k([`${r(d).textTheme}`]),key:h},[Ie(t,c.id)?(o(),i(b,{key:0},[g(y(Ie(t,c.id)),1)],64)):(o(),i(b,{key:1},[g("0.00")],64))],6))),128))]))),128))])]),l("h5",{style:{"margin-top":"1rem"},class:k([`${r(d).textTheme}`])},[l("b",null,[v(s,{icon:"turn-down"}),e[28]||(e[28]=g(" Delta"))])],2),l("table",rl,[l("thead",null,[l("tr",{style:{padding:"5px"},class:k([`${r(d).textTheme}`])},[l("th",{style:f({border:`1px solid ${r(d).accentColor}`})},"DROPS",4),l("th",{style:f({border:`1px solid ${r(d).accentColor}`})},"PINNED SERIES",4),(o(!0),i(b,null,L(j(D.value[C.value]),(t,u)=>(o(),i("th",{style:f({border:`1px solid ${r(d).accentColor}`}),key:u},y(t.name),5))),128))],2)]),l("tbody",null,[(o(!0),i(b,null,L(_e.value,(t,u)=>(o(),i("tr",{key:u,class:k([`${r(d).textTheme}`])},[l("td",{style:f({border:`1px solid ${r(d).accentColor}`})},y(u+1),5),l("td",{style:f({border:`1px solid ${r(d).accentColor}`})},y(t.dropKey.split(".")[0]+"."+t.dropKey.split(".")[1]+"."+t.dropKey.split(".")[2]),5),(o(!0),i(b,null,L(t.deltas,(c,h)=>(o(),i("td",{key:h,style:f({border:`1px solid ${r(d).accentColor}`})},y(c.toFixed(2)),5))),128))],2))),128))])])])],2)):x("",!0),H.value?(o(),i("div",dl,[l("div",{class:k(["leak-body",[`${r(d).mTheme}`]])},[l("button",{type:"button",onClick:e[7]||(e[7]=t=>H.value=!1),class:"leak-dismiss"},[v(s,{icon:"times"})]),l("div",{class:"l-left",style:f({width:U.value?"40%":"100%"})},[l("h4",{style:{"font-weight":"bold"},class:k([`${r(d).textTheme}`])},"Leak Analysis",2),e[33]||(e[33]=l("hr",null,null,-1)),(o(!0),i(b,null,L(K.value,(t,u)=>(o(),i("div",{class:"analysis-set",key:u},[t!=!1?(o(),i(b,{key:0},[l("h6",{class:k([`${r(d).textTheme}`])},[l("b",null,"Analysis on Dataset "+y(u+1),1)],2),l("p",null,[l("span",{class:k([`${r(d).textTheme}`])},"Result:",2),t!=!1&&t.suspectLocation.leak?(o(),i(b,{key:0},[l("b",{style:f({color:`${r(d).accentColor}`})},"Terdapat Indikasi Kebocoran",4),l("div",cl,[l("table",{style:{width:"100%","margin-top":"1rem"},class:k(["table table-striped table-hover;",[`${r(d).mTheme}`]])},[l("tr",null,[l("th",{style:f([{border:"1px solid #ccc",padding:"10px"},{color:`${r(d).accentColor}`}])}," Estimated Leak Point",4),t.suspectLocation.leakData.pu_location?(o(),i("th",{key:0,style:f([{border:"1px solid #ccc",padding:"10px"},{color:`${r(d).accentColor}`}])}," PU ",4)):x("",!0),t.suspectLocation.leakData.coordinate?(o(),i("th",{key:1,style:f([{border:"1px solid #ccc",padding:"10px"},{color:`${r(d).accentColor}`}])}," Coordinate ",4)):x("",!0)]),l("tbody",null,[l("tr",null,[l("td",{style:f([{color:`${r(d).accentColor}`},{"font-weight":"bold",border:"1px solid #ccc",padding:"10px"}])},y(t.suspectLocation.leakData.leak_point)+" KM ",5),t.suspectLocation.leakData.pu_location?(o(),i("td",{key:0,style:f([{color:`${r(d).accentColor}`},{"font-weight":"bold",border:"1px solid #ccc",padding:"10px"}])}," KM "+y(t.suspectLocation.leakData.pu_location),5)):x("",!0),t.suspectLocation.leakData.coordinate?(o(),i("td",{key:1,style:f([{color:`${r(d).accentColor}`},{"font-weight":"bold",border:"1px solid #ccc",padding:"10px"}])},[g(" Lat: "+y(t.suspectLocation.leakData.coordinate.latitude),1),e[29]||(e[29]=l("br",null,null,-1)),g(" Lng: "+y(t.suspectLocation.leakData.coordinate.longitude),1)],4)):x("",!0)])])],2)]),t.suspectLocation.leakData.coordinate?x("",!0):(o(),i("p",pl,[v(s,{icon:"info-circle"}),e[30]||(e[30]=g(" Map view and PU Location data is currently not supported for this line "))])),v(N,{onClick:c=>ot(t.suspectLocation.leakData.coordinate,"Leak Point: <b>"+t.suspectLocation.leakData.leak_point+" KM</b><br>PU Location: <b>KM "+t.suspectLocation.leakData.pu_location+"</b>"),"bt-disabled":!t.suspectLocation.leakData.coordinate},{default:T(()=>[v(s,{icon:"map-marker"}),e[31]||(e[31]=g(" Pinpoint on Map"))]),_:2},1032,["onClick","bt-disabled"]),t.suspectLocation.leakData.coordinate?(o(),i("a",{key:1,class:"gmaps",target:"_blank",href:`https://www.google.com/maps?q=${t.suspectLocation.leakData.coordinate.latitude},${t.suspectLocation.leakData.coordinate.longitude}`,style:{"margin-left":"0.5rem"}},"Google Maps",8,vl)):x("",!0)],64)):(o(),i(b,{key:1},[l("b",yl,[l("span",{style:f({color:`${r(d).accentColor}`})}," Tidak ada indikasi",4)]),l("ol",fl,[(o(!0),i(b,null,L(t.suspectLocation.probabilities,(c,h)=>(o(),i("li",{class:k([`${r(d).textTheme}`]),key:h},[l("span",null,y(c),1)],2))),128))])],64))])],64)):(o(),i("h6",ml,[l("b",null,"Analysis on Dataset "+y(u+1),1),e[32]||(e[32]=l("b",{style:{color:"#555"}},"Tidak ada indikasi",-1)),l("ol",bl,[(o(!0),i(b,null,L(t.suspectLocation.probabilities,(c,h)=>(o(),i("li",{key:h},y(c),1))),128))])]))]))),128))],4),U.value?(o(),i("div",{key:0,class:"l-right",style:f({width:U.value?"60%":"100%"})},[l("h4",{style:{"font-weight":"bold"},class:k([`${r(d).textTheme}`])},"Map View",2),e[34]||(e[34]=l("hr",null,null,-1)),v(Me,{latitude:re.value.latitude,longitude:re.value.longitude,popup:Ce.value},null,8,["latitude","longitude","popup"])],4)):x("",!0)],2)])):x("",!0),Q.value?(o(),i("div",gl,[l("button",{type:"button",onClick:ut,class:"leak-dismiss"},[v(s,{icon:"close"})]),e[38]||(e[38]=l("h5",{style:{"text-align":"center"}},[l("b",null,"History Data Playback")],-1)),v(a,null,{default:T(()=>[v(be,{style:{width:"400px"},"in-label":"Speed","model-value":oe.value,"onUpdate:modelValue":e[8]||(e[8]=t=>oe.value=t)},{default:T(()=>e[35]||(e[35]=[l("option",{value:"1000"},"Slowest",-1),l("option",{value:"500"},"Slower",-1),l("option",{value:"300"},"Moderate",-1),l("option",{value:"250"},"Faster",-1),l("option",{value:"200"},"Fastest",-1)])),_:1},8,["model-value"])]),_:1}),l("div",hl,[l("label",kl,[je(l("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>Ve.value=t),type:"checkbox"},null,512),[[Ke,Ve.value]]),e[36]||(e[36]=g(" Auto-replay "))]),l("label",xl,[je(l("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>fe.value=t),type:"checkbox"},null,512),[[Ke,fe.value]]),e[37]||(e[37]=g(" Autoplay on navigating "))])]),l("div",wl,[v(N,{"bt-disabled":!1,onClick:mt},{default:T(()=>[v(s,{icon:"backward"}),g("    "+y(Pe.value),1)]),_:1}),l("span",_l,[l("b",null,y(V.value),1)]),v(N,{"bt-disabled":!1,onClick:ft},{default:T(()=>[g(y(Se.value)+"    ",1),v(s,{icon:"forward"})]),_:1})]),l("div",{ref_key:"heatMap",ref:ge,style:{width:"100%",height:"600px"}},null,512),l("div",Dl,[l("div",Cl,[w.value?x("",!0):(o(),i("button",{key:0,onClick:e[11]||(e[11]=t=>w.value=!w.value),class:"controlbtn",type:"button"},[v(s,{icon:"play"})])),w.value?(o(),i("button",{key:1,onClick:e[12]||(e[12]=t=>w.value=!w.value),class:"controlbtn",type:"button"},[v(s,{icon:"pause"})])):x("",!0)]),l("div",$l,[l("input",{onChange:it,type:"range",min:0,max:P.value.length,value:_.value,class:"slider"},null,40,Ll),l("span",Tl,[l("span",{class:"slider-track",style:f({width:`${z.value}%`})},null,4)])]),l("div",null,[!w.value&&_.value==P.value.length?(o(),i("button",{key:0,onClick:ce,class:"controlbtn",type:"button"},[v(s,{icon:"undo"})])):x("",!0)])])])):x("",!0),Q.value?x("",!0):(o(),i("button",{key:4,type:"button",class:"showplayback",onClick:e[13]||(e[13]=t=>Q.value=!Q.value)},[v(s,{icon:"play"})])),Te.value?(o(),i("div",Sl,[l("div",Pl,[l("button",{type:"button",onClick:rt,class:"pbp-dismiss"},[v(s,{icon:"close"})]),e[42]||(e[42]=l("h3",null,[l("b",null,"Possible Leak Detected")],-1)),l("p",null,[e[39]||(e[39]=g(" Our system has detected a possible leak in the pipeline. Here goes the prediction details:")),e[40]||(e[40]=l("br",null,null,-1)),e[41]||(e[41]=l("br",null,null,-1)),l("h3",Vl,[l("b",null,"Position: "+y(R.value.suspectLocation.leakData.leak_point)+" KM ···· PU Location: "+y(R.value.suspectLocation.leakData.pu_location?`KM
          ${R.value.suspectLocation.leakData.pu_location}`:"Not Available"),1)]),R.value.suspectLocation.leakData.coordinate?(o(),le(Me,{key:0,"leak-point":R.value.suspectLocation.leakData.leak_point,latitude:R.value.mapsLink.latitude,longitude:R.value.mapsLink.longitude,"pu-location":R.value.suspectLocation.leakData.pu_location},null,8,["leak-point","latitude","longitude","pu-location"])):x("",!0)])])])):x("",!0)],64)}}});export{Bl as default};
