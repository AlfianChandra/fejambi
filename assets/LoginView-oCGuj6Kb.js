import{d as E,e as t,l as N,r as T,o as _,c as h,a as o,g as a,n as f,u as v,p as y,B as P,w as U,q as $,m as j,F as q}from"./index-CKdZo9W8.js";import{u as A}from"./theme-dAiyOSJM.js";import{_ as V}from"./InputView.vue_vue_type_style_index_0_lang-Co_igc19.js";import{a as F,_ as I,B as L}from"./ThemeSetting.vue_vue_type_style_index_0_lang-CoSKOshh.js";import{m as O}from"./formValidator-OdL4bhgE.js";import{_ as z}from"./ButtonView.vue_vue_type_style_index_0_computed_true_lang-BH_lMVmr.js";import{a as G}from"./axios-BimPEqV4.js";const K={class:f(["bl-wrapper"])},M={class:"bl-opt"},W={style:{display:"flex","flex-flow":"row nowrap","justify-content":"flex-start","margin-bottom":"1rem"}},D={class:"form-group"},H={key:0,class:"lgwait-overlay"},se=E({__name:"LoginView",setup(J){const{vPassword:g,vEmail:b,checkValidation:x}=O(),i=t(!1),r=A(),l=t(""),n=t(""),c=t(!0),m=t(""),d=t(""),k=[m,d];m.value=b(l).message,d.value=g(n).message,N([l,n],()=>{m.value=b(l).message||"",d.value=g(n).message||"",c.value=x(k)},{immediate:!0});const u=t(!1),B=async()=>{if(u.value=!0,!c.value){const w={username:l.value,password:n.value};try{const e=await G.post(y.baseEnd+"api/Auth/login",w),p=e.data.message,s=e.data.auth.token,C=e.data.auth.id;r.notifyAlertSuccess("Berhasil",p,"OK",()=>{localStorage.setItem("authToken",s),localStorage.setItem("userid",C),window.location.href="/Playback"}),u.value=!1}catch(e){e.response&&(r.notifyAlertError("Gagal",e.response.data.message,"Oke",()=>{}),u.value=!1)}}},S=()=>{i.value=!i.value};return(w,e)=>{const p=T("font-awesome-icon");return _(),h(q,null,[o(F,{visible:i.value,"onUpdate:visible":e[0]||(e[0]=s=>i.value=s)},null,8,["visible"]),a("div",K,[a("div",{class:f(["bl-inner",v(r).mTheme])},[a("div",M,[o(I),a("a",{class:f([v(r).textTheme]),onClick:S,href:"javascript:void(0)"},[o(p,{icon:"gear"})],2)]),a("div",W,[o(L,{style:{"padding-left":"1rem"},"site-name":v(y).appName},null,8,["site-name"])]),a("form",{onSubmit:P(B,["prevent"])},[o(V,{"in-label":"E-mail / Username","in-placeholder":"example@email.com","in-type":"text","in-required":!0,"in-helper":m.value,modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value=s)},null,8,["in-helper","modelValue"]),o(V,{"in-label":"Password","in-placeholder":"","in-type":"password","in-required":!0,"in-helper":d.value,modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=s=>n.value=s)},null,8,["in-helper","modelValue"]),a("div",D,[o(z,{"bt-type":"submit","bt-disabled":c.value},{default:U(()=>e[3]||(e[3]=[$("Sign-in")])),_:1},8,["bt-disabled"])])],32)],2)]),u.value?(_(),h("div",H,e[4]||(e[4]=[a("div",{class:"lgwait-inner"},[a("img",{style:{width:"200px",height:"200px","object-fit":"cover"},src:"https://cdn.dribbble.com/users/1186261/screenshots/3718681/media/1df2396f1eaa146bcb7dd3e73c1dc77b.gif"}),a("p",null,"Please wait")],-1)]))):j("",!0)],64)}}});export{se as default};
